{% extends "base.html" %}
{% block content %}

<div class="row search-wrapper page-content ml-lg-3 mr-3">
    <div class="recipe-thumb-view-recipe col-10 col-md-6">
        <img src="{{ recipe.image_url }}" class="img-fluid" alt="{{ recipe.recipe_name }}">
    </div>
</div>
<div class="row">
    <div class="recipe-wrap col-10 col-md-7 mb-5 mr-5">
        <br>
        <h4 class="mx-4">{{ recipe.recipe_name|capitalize }}</h4>
        <br>
        <h4 class="blue-text mx-4">Ingredients</h4>
        <ul>
            {% for ingredient in recipe.ingredients %}
            <li class="mx-4">{{ ingredient }}</li>
            {% endfor %}
        </ul>
        <h4 class="blue-text">Directions</h4>
        <ul class="recipe-directions mx-0">
            {% for direction in recipe.directions %}
            <li class="pr-4">{{ direction }}</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% if (session.user|lower == recipe.created_by|lower) %}
    <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="submit btn">
        Edit Recipe
    </a>
{% endif %}
    
{% if (session.user|lower == recipe.created_by|lower) or (session.user == "admin") %}
    <a href="#delete_recipe" data-toggle="modal">Delete Recipe</a>
    <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" id="delete_recipe">omg delete already</a>
{% endif %}

<!--Modal-->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="delete_recipe" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="confirmDeletion">Confirm Deletion</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure want to permanently delete this recipe?</p>
            </div>
            <div class="modal_footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" id="delete_recipe">
                    <button type="button" class="btn btn-primary">
                        Yes, Delete
                    </button>
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}