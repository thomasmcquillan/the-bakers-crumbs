{% extends "base.html" %}
{% block content %}

<div class="row mt-5 page-content justify-items-center">
    <div class="col-10 col-md-7 col-lg-6 mx-auto">
        <div class="recipe-img-wrap">
            <img src="{{ recipe.image_url }}" class="recipe-img" alt="{{ recipe.recipe_name }}">
        </div>
        <br><br>
    </div>
    <div class="recipe-card-header">
        <div class="col-10 col-md-9 col-lg-8">
            <h3 class="mx-3">{{ recipe.recipe_name|title }}</h3>
        </div>
    </div>
    <div class="recipe-card">
        <div class="col-11 col-md-9 col-lg-8">
            <br>
            <h4 class="blue-text mx-4">Ingredients</h4>
            <ul>
                {% for ingredient in recipe.ingredients %}
                <li class="mx-3">{{ ingredient }}</li>
                {% endfor %}
            </ul>
            <br>
            <h4 class="blue-text">Directions</h4>
            <ul class="mx-0">
                {% for direction in recipe.directions %}
                <li class="pr-4">{{ direction }}</li>
                {% endfor %}
            </ul>
            <br><br>
        </div>
    </div>
</div>

{% if (session.user|lower == recipe.created_by|lower) %}
    <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="submit btn">
        Edit Recipe
    </a>
{% endif %}
    
{% if (session.user|lower == recipe.created_by|lower) or (session.user == "admin") %}
    <a href="#delete_recipe" data-toggle="modal">Delete Recipe</a>
    <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" id="delete_recipe">omg delete already</a>
{% endif %}

<!--Modal-->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="delete_recipe" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="confirmDeletion">Confirm Deletion</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure want to permanently delete this recipe?</p>
            </div>
            <div class="modal_footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" id="delete_recipe">
                    <button type="button" class="btn btn-primary">
                        Yes, Delete
                    </button>
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}