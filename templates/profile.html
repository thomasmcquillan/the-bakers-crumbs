{% extends "base.html" %}
{% block content %}
<div class="container-md">
    <div class="row page-content mx-auto">
        <div class="col-10 col-md-5">
            <h4 class="text-center">Welcome back {{ username.capitalize() }}</h4>
            <br>
        </div>
    </div>
    <div class="row mx-auto">
        <div class="col-10 col-md-6">
            {% if recipes|length > 0 %}
            <p>Any recipes you have shared can be seen below.</p>
            {% endif %}
            {% if recipes|length == 0 %}
            <p class="text-center">We see you have not uploaded any recipes.
                Should you wish to, simply click the link below.</p><br>
            {% endif %}
        </div>
    </div>
    <div class="row mx-auto">
        <div class="col-4">
            <a class="tbc-button blue-button justify-content-center" href="{{ url_for('add_recipe') }}">Submit a Recipe</a>
        </div>
    </div>

    <div class="row mx-auto">
        {% for recipe in recipes %}
        <div class="col">
            <a href="#">
                <a href="{{ url_for('view_recipe', recipe_id=recipe._id) }}">
                    <img src="{{ recipe.image_url }}" class="img-fluid" alt="image of {{ recipe.recipe_name }}">
                </a>
            </a>
        </div>
        <div class="col-3">
            <h4>{{ recipe.recipe_name }}</h4>
        </div>
        {% endfor %}
    </div>

    <button type="button" class="btn tbc-button blue-button" data-bs-toggle="modal" data-bs-target="#delete_user">
        Delete my Account
    </button>
    <div class="modal-wrapper row">
        <div class="modal col-12 my-auto" id="delete_user" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h4>Are you sure you want to permanently delete your account?</h4>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" data-bs-dismiss="modal">No thankyou.</button>
                        <button type="button" class="btn"><a href="{{ url_for('delete_user', username=username) }}" class="modal-close">Yes, delete my account.</a></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}


<div class="row mx-auto">
    <div class="col-4">
        <a class="tbc-button blue-button justify-content-center nudge-down" href="#delete_user">Delete Account</a>
    </div>
</div>

<div class="modal fade" id="delete_user" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-content">
        <h4>Are you sure you wish to delete your account?</h4>
        <p>Deleting your account will also permanently delete all your recipes.</p>
    </div>
    <div class="modal_footer">
        <a href="#!" class="modal-close">Cancel</a>
        
    </div>
</div>